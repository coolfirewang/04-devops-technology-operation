# 技术运营

技术运营管理过程是技术运营能力建设的一个过程，它以业务为中心，交付稳定、安全、高效的技术运营服务，构建业界领先的技术运营能力，支撑企业的持续发展和战略成功。技术运营不仅要具备全局的架构视野和运维与监控规划，而且还需要从事件管理、变更管理、容量管理、成本管理和用户体验管理来综合为业务提供技术保障。 

技术运营管理过程分为:监控管理、事件与变更管理、配置管理、容量与成本管理、高可用管理、连续性管理、用户体验管理等，如表1所示。 

#####   表1　技术运营分级技术要求

| 技术运营    |      |         |           |      |      |            |
| :-------:    | :--:    | :-----:   | :-------: | :--:         | :--------: | :--------: |
| 监控          管理 | 事件与变更管理 | 配置管理 | 容量与成本管理 | 高可用管理 | 连续性             管理 | 用户体验管理 |
| 监控采集  | 事件管理 | 运营配置管理 | 容量管理 | 应用高可用  管理 | 应急管理 | 业务认知管理   |
| 数据管理 | 变更管理 |   |    成本管理    | 数据高可用  管理 | 风险管理 | 体验管理 |
| 数据应用 |  |           |             |        | 危机管理 |   |


## 1. 监控管理

监控管理是技术运营保障服务质量的手段之一，是衡量技术运营能力重要纬度。监控管理从数据流的纬度展开度量成熟度的分级，分别是监控采集、数据管理、数据应用。

### 1.1 监控采集

监控数据的源头，包括数据的获取方式、兼容性、传输方案等能力的描述。

#### 1.1.1采集服务

采集能力服务化，从采集的手段、支持的协议、兼容性、颗粒度、采集端的基础逻辑和扩展逻辑等角度对能力进行量化评估。

#### 1.1.2数据传输

采集能力的数据传输能力原子化，从传输数据质量保障、传输的可用性、传输过程中支持的功能特性的纬度来评估成熟度。

##### 表2　监控采集相关能力成熟度说明

| 级别 | 采集服务 | 数据传输 |
| ---- | -------- | -------- |
| 1    |          | 无       |
| 2    |          |          |
| 3    |          |          |
| 4    |          |          |
| 5    |          |          |



### 1.2 数据管理

#### 1.2.1数据筛选

作为数据处理服务端的数据接收服务，承接数据采集服务传输来的数据，需要拥有良好的吞吐性能和可扩展的架构，并且能却分数据类型和相应处理的功能逻辑。

#### 1.2.2 数据处理

指的是大数据处理的逻辑，支持逻辑运算、统计方法、机器学习等计算能力，可结合技术运营的场景，灵活实现数据的扩展与关联分析。同时，需考量数据处理的规模、性能及架构的能力。

#### 1.2.3数据存储

针对监控数据的存储场景，对存储的方案、架构、存储成本、数据高可用等纬度综合评估能力成熟度。

##### 表3　数据管理相关能力成熟度说明


| 级别 | 数据筛选 | 数据处理 | 数据存储 |
| ---- | -------- | -------- | -------- |
| 1    |          |          |          |
| 2    |          |          |          |
| 3    |          |          |          |
| 4    |          |          |          |
| 5    |          |          |          |



### 1.3　数据应用

监控数据的用途是衡量监控管理能力的一个重要能力项，应用按场景的不同主要分成三个方向：告警与管控、数据服务、可视化。

#### 1.3.1　告警与管控

监控对异常识别的能力，包括对异常判断逻辑、管控能力、与业务场景的关联等。

#### 1.3.2　数据服务

指技术运营需具备可开放的数据服务能力，为其他系统整合与关联技术运营的数据提供支持。

#### 1.3.3　可视化管理

可视化是监控数据指导技术运营工作的开展的重要能力项之一，包括了展现灵活性、可定制性、智能化和运维场景结合度的评估。

##### 表4 数据应用相关能力成熟度说明

| 级别 | 告警与管控 | 数据服务 | 可视化管理 |
| ---- | ---------- | -------- | ---------- |
|      |            |          |            |
|      |            |          |            |
|      |            |          |            |
|      |            |          |            |
|      |            |          |            |



## 2. 事件与变更管理

事件和变更管理是技术运营和IT服务过程中两个重要管理手段。前者对影响生产的事故&问题建立预防、高效处理及度量改进。后者则是对IT 基础设施、系统应用、业务产品配置等场景实施变更所进行的审批和控制。

### 2.1 事件管理

通过事件管理过程的细分，明确了不同阶段事件管理的重点，从快速发现到高效的处理流转再到复盘改善的跟进，建立起事件全生命周期的管理。

#### 2.1.1事前管理

事前管理要求在事前对于事件能够做到定义清晰、完备问题发现能力以及预防止损措施。如监控覆盖、信息周知和上升等

#### 2.1.2事件处理

事件处理包括应急响应的流程及要求、事件处理团队内外部的协同配合机制。

#### 2.1.3事后管理

故障后的学习与改进的能力衡量，通过复盘、不同维度的事件分析等方式保持对事后改善工作的落地。如客户评估、演习验收等手段确认达标。

##### 表5 事件管理相关成熟度说明

| 级别 | 事前管理 | 事件处理 | 事后管理 |
| ---- | -------- | -------- | -------- |
| 1    |          |          |          |
| 2    |          |          |          |
| 3    |          |          |          |
| 4    |          |          |          |
| 5    |          |          |          |

### 2.2　变更管理

对IT 基础设施、系统应用、业务产品配置等场景实施变更所进行的审批和控制。

#### 2.2.1事件变更流程管理

 通过对变更进行评估，从而确保能够在对用户、服务产生最小负面影响的情况下实施这些变更，同时通过在组织内进行有效的协商和沟通，确保所有的变更都具有合理评估和可追溯性。

##### 表6　变更管理的相关成熟度说明

| 级别 | 事件变更流程管理 |
| :--: | ---------------- |
|  1   |                  |
|  2   |                  |
|  3   |                  |
|  4   |                  |
|  5   |                  |

## 3 配置管理

配置管理作为技术运营工作的基础数据，为技术运营的工作的开展提供必要的配置对象管理、录入、关联等功能，各个技术运营系统可以基于此配置数据实现自动化运维、监控管理等功能。

### 3.1运营配置管理

运营配置管理特指与技术运营相关的配置数据，包括配置管理系统的基础功能与扩展能力，配置对象的说明与对象间的关联与应用场景。

#### 3.1.1　配置管理能力

配置管理能力由管理方法或系统承载，从配置记录更新的实时性、配置管理的流程机制、系统接口能力、智能化等角度来评估能力的成熟度。

#### 3.1.2　配置对象与关联关系

根据技术运营的场景枚举需要纳管的配置对象和对象间的关联关系，主要评估配置对象记录和其属性的数据获取方法、配置的可扩展性、配置数据定义权责，以及基于配置数据可指导开展的运维活动。

##### 表7 配置管理的相关成熟度说明

| 级别 | 配置管理能力 | 配置对象与关联关系 |
| ---- | ------------ | ------------------ |
| 1    |              |                    |
| 2    |              |                    |
| 3    |              |                    |
| 4    |              |                    |
| 5    |              |                    |

## 4　容量与成本管理

容量是广义的capacity在负载、性能和业务量的综述，与成本管理组合可量化技术运营的质量和效率管理纬度的能力。

### 4.1　容量管理

包括三个纬度：硬件负载、吞吐性能、业务量，以及这三个容量管理纬度与运维活动的结合。

#### 4.1.1　硬件容量

容量管理中与IaaS相关的能力项，包括指标纬度、统计方法、可指导的运营活动等。

#### 4.1.2　业务容量

以业务的视角来组织容量的数据，让容量的指标与业务的实际质量和运维效率结合，指导运维工作开展。

##### 表8　容量管理相关成熟度说明

| 级别 | 硬件容量 | 业务容量 |
| ---- | -------- | -------- |
|      |          |          |
|      |          |          |
|      |          |          |
|      |          |          |
|      |          |          |

### 4.2　成本管理

量化管理运维对象生命周期的运营成本，以及必要的成本管理活动，包括合理性分析、架构优化、容灾规划等等。

#### 4.2.1　成本合理性

对运营成本的主动分析，与容量数据、配置管理数据的结合，并指导运维优化活动的开展，推动架构优化、自动化等能力的建设。

#### 4.2.2　预算与核算

成本管理的一个重要环节，建议成本与业务的关联，并根据业务的发展有计划的申请资源，并定期核对资源的使用合理性与必要性，寻求质量与效率的最优组合。

##### 表9　成本管理相关成熟度说明

| 级别 | 成本合理性 | 预算与核算 |
| ---- | ---------- | ---------- |
| 1    |            |            |
| 2    |            |            |
| 3    |            |            |
| 4    |            |            |
| 5    |            |            |

## 5　高可用管理

高可用管理包括应用高可用管理和数据高可用管理。

### 5.1　应用高可用管理

可用是指系统无中断地执行其功能的能力，代表系统的可用性程度。

目的：应用层包含了系统应用的业务处理逻辑，可以分为接入层，应用层和服务层，因为业务处理逻辑复杂，应用数量往往较多，需要在具备弹性可扩展能力的同时还需要具有很好的柔性容错能力。

#### 5.1.1　弹性能力

应用节点可以快速横向扩展并更新应用至最新状态上线承载流量，甚至可以根据监控性能指标或按计划进行应用的动态扩容伸缩。相关说明如下：

##### 负载均衡与服务网关

支持多种负载均衡算法，根据后端性能灵活的分配一定比例的流量给后端服务器，具备流量切换的能力。如Nginx，Zuul，Kong

##### 注册中心与路由调度

1）服务节点自动注册，自动发现，自动路由到新发现节点；2）服务节点宕机自动下线，节点异常自动下线与隔离；3）注册中心本身高可用；4）举例，如Zookeeper，Eureka，Consol，Etcd。

##### 服务治理

有完备的应用服务间调用关系治理的平台，具备完善的应用服务级别的监控报警。通过管理平台，可以对所有服务消费者和服务提供者进行管理，如上线下线，权重调整，调用统计等操作。

##### 业务无损发布管理

1）灰度发布：分批发布，逐步扩大至整个集群全部完成；

2）结合流量切换操作：每批发布的机器在操作前都摘除流量再更新操作，更新完毕后切回流量。

#### 5.1.2　柔性能力

**失效转移与重试** 

当部分应用节点故障或者性能严重下降时，应有机制实现自动将该故障节点从在线服务列表中去掉，以避免仍对生产产生影响。应用调用有重试机制，以保证在网络不好或其他原因导致调用失败情况下还可以重试保证尽量调用成功。

**限流管理**

当访问流量超过能承载的能力时，有能力对流量进行主动限制，以避免流量过载导致后端服务崩溃。

**业务降级管理** 

划分核心功能和非核心功能，当出现故障或资源瓶颈时，在不能立即恢复业务的情况下，优先把资源留给核心功能，主动降级部分非核心功能，以保障核心功能正常运行，技术上可以把降级做成后台管控的开关以便快速降级及恢复操作。

**分布式消息**

消息队列中间件是分布式系统中重要的组件，主要解决应用耦合，异步消息，流量削锋等问题。实现高性能，高可用，可伸缩和最终一致性架构。是大型分布式系统不可缺少的中间件。

#### 5.1.3　运行与维护管理

具备集中式的运行与维护管理平台，监控具备从主机监控到端口监控，到业务层面的立体的监控，结合配置管理系统实时更新状态信息，集中展现，信息全面准确。引入智能化的技术，智能预测业务增长、故障预警，动态止损、智能调度。

##### 表9　高可用管理相关成熟度说明

| 级别 | 弹性能力 | 柔性能力 | 运行与维护管理 |
| ---- | -------- | -------- | -------------- |
| 1    |          |          |                |
| 2    |          |          |                |
| 3    |          |          |                |
| 4    |          |          |                |
| 5    |          |          |                |

### 5.2　数据高可用管理

#### 5.2.1　数据库高可用

**主从同步**

主从同步可以让数据库中的数据复制到另一台或多台独立的服务器上，在主库发生问题无法快速恢复时可以把从库修改为主库对外提供服务，主库与从库之间同步的延迟确定了从库切换为主库时可能丢失的数据的时间。

**读写分离**

数据库做了主从同步以后，从库即可以作为备库，也可以作为日常的读库，提高日常的读能力，缓解主库的压力

**分表分库**

为解决单节点数据库服务器的 能力限制，将数据库水平扩展到不同的物理节点上，每个节点都能提供相应的读写能力，以满足数据库高性能的要求。

**数据一致性**

数据写入的数据一致性一般通过事务性来解决。事务分为传统事务和分布式事务。传统事务一般通过数据库本身完成，分布式事务因为涉及跨多个数据库，故需要在应用层解决，如使用XA等2PC的方式，但2PC的方式会产出锁的占用，影响性能，故后续又出现了补偿型柔性事务的方式，如、TCC，ServiceComb-Saga等。

#### 5.2.2　缓存高可用

能够使用缓存对热点数据进行加速，对缓存有持久化保存，有缓存的备份节点，主备节点保持实时数据同步。缓存节点宕机可以自动切换至备份节点，并保证数据一致。

##### 表10　数据高可用管理相关成熟度说明

| 级别 | 数据库高可用 | 缓存高可用 |
| ---- | ------------ | ---------- |
|      |              |            |
|      |              |            |
|      |              |            |
|      |              |            |
|      |              |            |

## 6　业务连续性管理

### 6.1　风险管理

识别对组织的潜在威胁以及这些威胁一旦发生可能对业务运行带来的影响的一整套管理过程。

该过程为组织建立有效应对威胁的自我恢复能力提供了框架，以保护关键相关方的利益、声誉、品牌和创造价值的活动。

目的：发现潜在的威胁，找到应对的机制

#### 6.1.1　RTO和RPO的衡量

RTO 是一个服务级别目标，是指在灾难发生后达到所需运行能力所需的时间。

RPO 是一个业务连续性目标，规定灾难恢复过程复原所有可恢复系统后达到的业务状态或业务状况。

目标：根据关键业务板块定级，制定衡量方法，有准确的衡量办法和自动化监控的工具能够真实的衡量运行状态。

#### 6.1.2　业务影响分析

如应用系统变更前能够分析到是否是核心应用，是否被核心应用依赖，变更失败会影响到哪些业务场景。网络变更操作前，能够提前了解到变更设备关联的服务器，关联的应用及数据库，并推算业务影响范围。数据库变更能够提前预估可能影响哪些应用，变更是否会引起数据库锁表，性能下降等问题。

目标：根据对关键业务的梳理，预估可能的故障对业务带来的影响。

#### 6.1.3　风险分析

**风险分析：**

有从技术架构，数据，安全等多种视角的风险分析评估，有技术专家参与，对一直风险和未知风险分类，并对已知风险有改进计划。对变更操作充分评估风险，控制到最小。能够充分考虑法律和监管风险。充分考虑外部威胁和外部舆情和客服等渠道的风险。对网络中断，IDC环境灾难等风险有评估和应对办法。

目的：对目前存在的运行风险有周期性分析的计划，风险评估，并对风险有持续的改进计划和方案。

##### 表11　风险管理相关成熟度说明

| 级别 | RTO和RPO的衡量 | 业务影响分析 | 风险分析 |
| ---- | -------------- | ------------ | -------- |
| 1    |                |              |          |
| 2    |                |              |          |
| 3    |                |              |          |
| 4    |                |              |          |
| 5    |                |              |          |

### 6.2　危机管理

目的：应对已经发生的威胁，涉及需要鉴定、评估、理解和如何应对危机

#### 6.2.1　重大风险与危机管理机制

有危机管理组织，负责在重大风险或危机发生时，综合业务影响，用户损失影响，财产损失风险，社会舆论影响，法律风险等问题，进行评估及决策，通过规范的方式对客户及社会公众及时发布信息及处理情况，如果有国家监管部门应按照及时上报监管部门。

不同于应急小组，该组织在重大危机事件发生后启动危机处理流程，尽可能快速评估风险，决策是否启动灾备应急计划，统一公关口径对外披露信息。

该小组一般需要业务负责人，IT技术部门负责人，法律顾问，公共关系发言人，管理层。

#### 6.2.2　灾备管理能力

根据业务的重要程度和连续性要求，制定数据灾备，业务灾备，业务多活等灾备方案

##### 灾备测试和演练：

具备定期灾备测试和演练的计划和执行记录

##### 灾难恢复 ：

在灾难发生后，经过分析决策及时启动灾难恢复计划，快速恢复生产。

##### 表12　危机管理相关成熟度说明

| 级别 | 重大风险与风险管理机制 | 灾备管理能力 |
| ---- | ---------------------- | ------------ |
| 1    |                        |              |
| 2    |                        |              |
| 3    |                        |              |
| 4    |                        |              |
| 5    |                        |              |

### 6.3　应急管理

目的:在突发或重大IT事件发生后，对IT技术和业务进行快速恢复，最大限度地减少事件造成的危害。

#### 6.3.1　 应急预案计划

良好的应急预案计划应该能够及时更新，集中管理应急响应预案的版本和发布，支持快速检索相关预案内容以便及时执行。

#### 6.3.2　应急演练计划与执行

有完整的定期执行的演练计划，历史执行的演练计划可以查询到并符合实际情况。技术上通过模拟真实情况主动注入故障的方式能够提前演练验证系统的健壮性和对故障的处理机制和处理时间。

#### 6.3.3　应急管理组织架构

1.有定期更新的应急管理组织架构，包括具备技术能力的IT部门代表，研发部门代表，业务部门代表，高级管理层代表

2.应急响应及处理能力，监控系统及时准确，通过引入智能化的技术，结合知识库和应急预案，迅速准确的分析出应急事件的原因，甚至结合应急预案的操作步骤进行自动化的止损操作

##### 表13　应急管理相关成熟度说明

| 级别 | 应急预案计划 | 应急演练计划与执行 | 应急管理组织架构 |
| ---- | ------------ | ------------------ | ---------------- |
| 1    |              |                    |                  |
| 2    |              |                    |                  |
| 3    |              |                    |                  |
| 4    |              |                    |                  |
| 5    |              |                    |                  |

## 7　用户体验管理 

用户体验是技术运营的核心增值能力，通过对所属业务的用户&产品体验的管理优化，提升业务的访问速度、减少异常中断达到终止提升产品核心竞争力的目标。

### 7.1　业务认知管理

技术人员除了技术以外也需要加强多业务的学习和使用以达到更好的技术端支持。这里从业务学习和知识考核两方面做了要求。

#### 7.1.1　业务学习管理

从业务熟悉程度从低到高的要求学习能力，最终以业务结合技术梳理成文档化、细化报告为目标。

#### 7.1.2　业务知识考核机制 

业务学习为主同时也需要通过建立必要的考核机制以检验达到的业务熟悉阶段。最终也会结合更细节的度量方法。

##### 表14　用户体验管理相关成熟度说明

| 级别 | 业务学习管理 | 业务知识考核机制 |
| ---- | ------------ | ---------------- |
| 1    |              |                  |
| 2    |              |                  |
| 3    |              |                  |
| 4    |              |                  |
| 5    |              |                  |

### 7.2　体验管理

将直观的用户体验指标分类和量化，分阶段从不同的维度（技术、产品、交互设计）设立计划，逐步提升数据，引导直观感受的提升。

#### 7.2.1　体验数据管理

通过分类细化体验指标，建立数据能力及意识帮助量化体验。包括数据梳理、上报、可视化及平台化的建设。

#### 7.2.2　体验优化

在业务理解和体验数据可视的基础上，通过对产品流程、交互过程、功能等过程采用技术、流程优化等综合化的手段提升体验项和指标。

##### 表15　体验管理相关成熟度说明

| 级别 | 体验数据管理 | 体验优化 |
| ---- | ------------ | -------- |
| 1    |              |          |
| 2    |              |          |
| 3    |              |          |
| 4    |              |          |
| 5    |              |          |

