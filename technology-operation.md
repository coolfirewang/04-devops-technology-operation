# 技术运营

技术运营管理过程是技术运营能力建设的一个过程，它以业务为中心，交付稳定、安全、高效的技术运营服务，构建业界领先的技术运营能力，支撑企业的持续发展和战略成功。技术运营不仅要具备全局的架构视野和运维与监控规划，而且还需要从事件管理、变更管理、容量管理、成本管理和用户体验管理来综合为业务提供技术保障。 

技术运营管理过程分为:监控管理、事件与变更管理、配置管理、容量与成本管理、高可用管理、连续性管理、用户体验管理等，如表1所示。 

#####   表1　技术运营分级技术要求

| 技术运营    |      |         |           |      |      |            |
| :-------:    | :--:    | :-----:   | :-------: | :--:         | :--------: | :--------: |
| 监控          管理 | 事件与变更管理 | 配置管理 | 容量与成本管理 | 高可用管理 | 连续性             管理 | 用户体验管理 |
| 监控采集  | 事件管理 | 运营配置管理 | 容量管理 | 应用高可用  管理 | 应急管理 | 业务认知管理   |
| 数据管理 | 变更管理 |   |    成本管理    | 数据高可用  管理 | 风险管理 | 体验管理 |
| 数据应用 |  |           |             |        | 危机管理 |   |


## 1. 监控管理

监控管理是技术运营保障服务质量的手段之一，是衡量技术运营能力重要纬度。监控管理从数据流的纬度展开度量成熟度的分级，分别是监控采集、数据管理、数据应用。

### 1.1 监控采集

监控数据的源头，包括数据的获取方式、兼容性、传输方案等能力的描述。

#### 1.1.1采集服务

采集能力服务化，从采集的手段、支持的协议、兼容性、颗粒度、采集端的基础逻辑和扩展逻辑等角度对能力进行量化评估。

#### 1.1.2数据传输

采集能力的数据传输能力原子化，从传输数据质量保障、传输的可用性、传输过程中支持的功能特性的纬度来评估成熟度。

##### 表2　监控采集相关能力成熟度说明

| 级别 | 采集服务                                                     | 数据传输                                                     |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1    | a)通过系统自带的命令完成监控采集（无agent），如ssh、scp
b)通过开放的通用协议进行数据采集（无agent），如http、syslog、snmp等 | 无                                                           |
| 2    | a)独立采集服务，逻辑与配置分离
b)支持可扩展、高可用的数据采集架构
c)嵌入sdk/api实现私有协议的数据上报
d)支持系统日志、应用日志等数据格式上报
e)量化管理采集服务在企业应用的覆盖率 | a)通过agent完成数据采集
b)通过捕获终端标准数据来实现系统输出的数据采集 |
| 3    | a)提供统一采集服务能力
b)采集服务具备跨平台兼容性的能力
c)提供集中式的采集配置能力，如采集内容、开关等
d)采集端具备实时性管控、发送延迟、数据校验、统计等管理逻辑
e)新增采集逻辑通过插件化扩展，有自定义监控内容的能力
f)提供开放式、自定义的数据上报方案，协议可灵活扩展，有协议机制保障数据的可靠性
g)内置常用排障数据格式的支持，如tcpdump、自定义日志
h)对监控采集有限制、限频等管理办法，确保不影响生产服务
i)数据采集规模（指标、采集对象、实时性）与性能量化的要求 | a)有高可靠数据传输通道，传输通道有高可用容灾方案
b)支持多种传输方案，如push或pull
c)可定制数据传输的存储节点，单份数据多份传输目标的分发能力 |
| 4    | a)采集服务支持频率调节
b)采集架构支持平行扩展、数据汇聚、高效传输等特性
c)监控采集支持智能分析和决策，动态调整采集服务，如采集的内容减少、频率降低等
d)支持更细粒度的采集能力的配置 | a)具备数据传输质量保障的能力，如支持分片、压缩、断点续传等传输特性
b)支持数据加密、解密及校验等 |
| 5    | a)监控采集能力由固定规则到动态规则，并且与技术运营能力联动
b）可配置的关联运维事件，实现同一运维对象的不同采集内容变化。（如动态识别容量压测事件的采集内容、堆栈分析排障的采集内容） | 无                                                           |

### 1.2 数据管理

#### 1.2.1数据筛选

作为数据处理服务端的数据接收服务，承接数据采集服务传输来的数据，需要拥有良好的吞吐性能和可扩展的架构，并且能却分数据类型和相应处理的功能逻辑。

#### 1.2.2 数据处理

指的是大数据处理的逻辑，支持逻辑运算、统计方法、机器学习等计算能力，可结合技术运营的场景，灵活实现数据的扩展与关联分析。同时，需考量数据处理的规模、性能及架构的能力。

#### 1.2.3数据存储

针对监控数据的存储场景，对存储的方案、架构、存储成本、数据高可用等纬度综合评估能力成熟度。

##### 表3　数据管理相关能力成熟度说明

| 级别 | 数据筛选                                                     | 数据处理                                                     | 数据存储                                                     |
| :--: | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
|  1   | a)支持较强的数据接收吞吐性能                                 | a)能对原始数据源有预处理能力
b)对异常数据有识别与校对的机制   | a)有独立数据存储方案                                         |
|  2   | a)支持可扩展的数据接收架构能力
b)支持对原始数据有清洗、校对等识别异常数据的能力与机制
c)支持数据转发、丢弃、复制等数据接收逻辑
d)支持异构数据源的集中数据接收 | a)支持自定义数据四则运算、统计（分类、聚类）等常用逻辑
b)支持对外支持易用的API数据服务
c)通用可扩展的ETL，如数据清洗、转换、导入、加载等数据处理特性
d)支持异构异数据源的处理、关联分析等 | a)支持统一的数据存储管理
b)存储架构支持可扩展，如数据类型、容量
c)存储能力支持数据一致性、d)完整性、可用性等特性
支持多种数据类型的存储方案，如时序数据、文本、数值型 |
|  3   | a)支持分钟级全网数据上报的数据接收架构能力
b)数据接收平台化，可灵活对接不同上报数据源
c)对外提供统一数据上报api服务，满足多协议多格式的数据源，如文本、字符串、加密协议等。
d)支持数据检查，如识别空值、乱码、属性校验等，保证数据质量 | a)可扩展数据处理架构，区分实时计算与离线统计场景
b)数据处理架构支持平行扩展
c)支持数据处理延时小于1分钟
d)支持结构化与半结构化的数据的处理，如时序数据处理、自定义日志字段解析等
e)支持数据处理阶段的逻辑异常的监控告警能力
f)有数据校正、不丢失、保持数据完整性的能力 | a)支持高密度的数据存储查询能力
b)按数据使用场景区分冷热数据的存储架构方案
c)支持自定义数据集
d)数据存储的数据安全性，备份、容量等高可用考虑
d)支持时序数据库提供的时序数据的统计功能 |
|  4   | a)根据数据上报量动态管理数据接收容量与吞吐性能
b)接收服务防雪崩架构
c)支持秒级级全网数据上报的数据接收架构能力
d)数据吞吐的性能与处理规模能满足该公司业务未来一段时间的发展，按照同时在线和指标的规模，推算一个规模值 | a)数据处理逻辑配置化、可视化，可编排任务。
b)支持插件化扩展新数据处理逻辑或数据模型
c)数据处理配置为引入机器学习模式提供平台能力支持
d)可灵活关联不同数据源，按业务场景组织多源数据 | a)确保存储成本合理前提，最大化存储原始数据，以支持查询检索和离线计算（按业务场景所需来定义存储时长）
b)并根据已知的数据用途对数据进行有效的预加工和训练
c)支持对外数据接口能力，支持数据统计能力 |
|  5   | a)支持PB的数据规模的数据筛选能力                             | a)基于机器学习的智能数据分析能力，实现持续进化的发现新的数据特征
b)通过AI能力达到故障预测等数据效果，有业务价值
c)数据处理规模与性能达到PB级，通过架构可扩展性论证。 | a)存储模型支持机器学习对数据集管理的需求                     |

### 1.3　数据应用

监控数据的用途是衡量监控管理能力的一个重要能力项，应用按场景的不同主要分成三个方向：告警与管控、数据服务、可视化。

#### 1.3.1　告警与管控

监控对异常识别的能力，包括对异常判断逻辑、管控能力、与业务场景的关联等。

#### 1.3.2　数据服务

指技术运营需具备可开放的数据服务能力，为其他系统整合与关联技术运营的数据提供支持。

#### 1.3.3　可视化管理

可视化是监控数据指导技术运营工作的开展的重要能力项之一，包括了展现灵活性、可定制性、智能化和运维场景结合度的评估。

##### 表4 数据应用相关能力成熟度说明

| 级别 | 告警与管控                                                   | 数据服务                                                     | 可视化管理                                                   |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1    | a)通过阈值异常识别。
b)有简单的收敛方案，能够多通道发送告警信息。 | 无                                                           | a)支持在线数据图表展示的功能。                               |
| 2    | a)支持监控对象的分级告警。
b)对重大告警的管控有标准流程指导。
c)存储告警明细记录，支持告警统计数据的系统导出。
d)对告警触达率有统计分析和要求 | a)数据支持常见统计方案的加工，如max、avg、排序等
b)数据支持按条件数据导出
c)数据支持复制、同步、传输到其他存储介质
d)支持自定义数据接口和内容的数据服务 | a)可自定义图形或表格
b)大屏展示重点的业务监控指标。
c)支持在线数据查询能力 |
| 3    | a)支持预警、告警通知等管控能力
b)支持告警关联用户自定义功能/工具，实现事件触发的能力。
c)支持配置化或规则化的告警关联分析或关联收敛。（单对象多事件）
d)告警通知支持自定义升级机制。
e)对基础/标准化的告警有自动化工具实现故障自愈或绕行。
f)有告警风暴管理能力，如抑制、收敛等管控能力。 | a)数据支持在线自定义分析逻辑实现，如在线sql
b)支持自定义离线或异步的大规模数据计算，如批量mapreduce计算
c)以接口化的形式提供数据服务的管理能力（限频、限制来源等等）
d)数据服务提供对业务或技术优化的支撑的数据结论
e)具备数据安全管控能力，如按需分配权限、数据加密或脱敏等。 | a)提供基于业务拓扑架构或调用关系的数据可视化功能
b)可视化展示能标示监控异常点
c)支持数据的多维维度展开、下钻
d)视图反馈KPI的数据，对监控数据的提炼和加工汇总。
e)支持权限分级管理，支持按需申请视图使用权限 |
| 4    | a)支持动态阈值的告警能力，效果比传统模式有提升。如降低告警量、准确性提高。（非统计学算法，强调机器学习手段的引入，且突出效果优于传统方案）
b)对多对象多事件的关联、抑制和收敛能力。
c)自动升级语音电话服务，告警通知、升级与组织架构关联。
d)与其他运维事件关联，实现告警触发的快速根因定位与修复能力。 | a)数据监控链条支持1分钟端到端输出结果的能力                  | a)运维可视化可根据业务场景的需求，可视化的配置方式所需的图表或功能。
b)可体现异常点对全局的影响分析
c)支持多用户角色协作管理 |
| 5    | a)按业务场景实现业务影响评估、故障自愈、故障智能调度、业务智能止损等告警发现与平台管控的能力。
b)支持故障发现、根因分析、架构优化等技术运营的目的。 | a)智能数据推荐服务
b)智能分析设备及应用等关联关系，智能分析影响范围，为变更，故障等分析决策过程做数据支撑。 | a)智能视图的推荐。
b)按业务场景智能生成监控视图。             |

## 2. 事件与变更管理

事件和变更管理是技术运营和IT服务过程中两个重要管理手段。前者对影响生产的事故&问题建立预防、高效处理及度量改进。后者则是对IT 基础设施、系统应用、业务产品配置等场景实施变更所进行的审批和控制。

### 2.1 事件管理

通过事件管理过程的细分，明确了不同阶段事件管理的重点，从快速发现到高效的处理流转再到复盘改善的跟进，建立起事件全生命周期的管理。

#### 2.1.1事前管理

事前管理要求在事前对于事件能够做到定义清晰、完备问题发现能力以及预防止损措施。如监控覆盖、信息周知和上升等

#### 2.1.2事件处理

事件处理包括应急响应的流程及要求、事件处理团队内外部的协同配合机制。

#### 2.1.3事后管理

故障后的学习与改进的能力衡量，通过复盘、不同维度的事件分析等方式保持对事后改善工作的落地。如客户评估、演习验收等手段确认达标。